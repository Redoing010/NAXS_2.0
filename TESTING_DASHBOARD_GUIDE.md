# NAXS 系统测试监控面板使用指南

## 概述

NAXS 智能投研系统现已集成了全面的测试监控功能，用户可以通过前端界面直接查看系统性能指标、运行测试和监控系统健康状态，无需额外操作。

## 功能特性

### 🎯 核心功能

1. **实时系统监控**
   - API性能指标（响应时间、成功率、吞吐量、错误率）
   - 系统资源监控（CPU、内存、磁盘使用率）
   - 数据库连接状态和查询性能
   - WebSocket连接统计

2. **自动化测试集成**
   - 一键运行各种类型的测试（API测试、压力测试、集成测试）
   - 实时查看测试结果和历史记录
   - 测试指标详细分析

3. **系统健康检查**
   - 组件状态监控（数据库、缓存、内存、熔断器）
   - 健康状态可视化指示器
   - 异常告警和状态变化追踪

4. **数据导出功能**
   - 系统报告一键导出
   - JSON格式的详细数据
   - 支持历史数据分析

## 使用方法

### 访问测试监控面板

1. 启动NAXS系统：
   ```bash
   # 启动后端API服务
   cd market-api
   python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
   
   # 启动前端应用
   cd apps/web
   npm run dev
   ```

2. 打开浏览器访问：`http://localhost:5173`

3. 在左侧导航栏中点击 **"系统监控"** 菜单项

### 界面功能说明

#### 📊 系统状态概览

顶部的指标卡片显示关键系统指标：
- **API响应时间**：平均API响应时间，绿色表示正常（<200ms），黄色表示警告
- **成功率**：API请求成功率，绿色表示健康（>95%），红色表示异常
- **CPU使用率**：系统CPU使用情况，绿色表示正常（<70%），黄色表示警告
- **内存使用率**：系统内存使用情况，绿色表示正常（<80%），黄色表示警告

#### 🔧 详细指标监控

**API性能面板**：
- 显示API吞吐量、错误率等详细指标
- 实时更新的性能数据
- 成功率进度条可视化

**数据库状态面板**：
- 数据库连接数和查询时间
- 缓存命中率统计
- 数据库健康状态指示器

#### 🧪 测试功能

**运行测试**：
1. 点击右上角的 **"运行测试"** 按钮
2. 选择测试类型（全部、API、压力测试、集成测试）
3. 系统将自动执行测试并显示进度
4. 测试完成后可在测试结果面板查看详情

**测试结果面板**：
- 显示所有测试的执行历史
- 测试状态指示器（通过✅、失败❌、运行中🔄）
- 详细的测试指标（请求数、失败数、响应时间等）

#### 📈 实时连接监控

**WebSocket状态面板**：
- 连接状态指示器
- 活跃连接数统计
- 消息传输速率
- 系统运行时间

### 高级功能

#### 📋 数据导出

1. 点击右上角的 **"导出报告"** 按钮
2. 系统将生成包含所有监控数据的JSON报告
3. 文件自动下载，命名格式：`naxs-system-report-YYYY-MM-DD.json`

#### 🔄 自动刷新

- 系统指标每5秒自动刷新
- 测试结果每3秒自动更新
- 无需手动刷新页面

## 状态指示器说明

### 健康状态颜色编码

- 🟢 **绿色 (Healthy)**：系统运行正常
- 🟡 **黄色 (Warning)**：系统有轻微问题，需要关注
- 🔴 **红色 (Error)**：系统存在严重问题，需要立即处理
- ⚪ **灰色 (Unknown)**：状态未知或组件未响应

### 测试状态说明

- ✅ **Passed**：测试通过
- ❌ **Failed**：测试失败
- 🔄 **Running**：测试正在运行
- ⏸️ **Pending**：测试等待执行

## 故障排除

### 常见问题

1. **系统指标显示异常**
   - 检查后端API服务是否正常运行
   - 确认数据库连接是否正常
   - 查看后端日志获取详细错误信息

2. **测试无法运行**
   - 确认后端API服务在端口8000正常运行
   - 检查网络连接是否正常
   - 查看浏览器控制台是否有错误信息

3. **数据不更新**
   - 刷新浏览器页面
   - 检查WebSocket连接状态
   - 确认后端服务没有崩溃

### 性能优化建议

1. **系统资源监控**
   - CPU使用率持续超过80%时，考虑优化算法或增加服务器资源
   - 内存使用率超过90%时，检查是否存在内存泄漏
   - 磁盘使用率超过95%时，及时清理日志和临时文件

2. **API性能优化**
   - 响应时间超过500ms时，检查数据库查询和网络延迟
   - 错误率超过5%时，分析错误日志并修复问题
   - 成功率低于95%时，检查系统稳定性

## 技术架构

### 前端组件

- **TestDashboard.tsx**：主测试监控面板组件
- **实时数据更新**：使用React Query进行数据获取和缓存
- **图表可视化**：基于Recharts库的性能图表
- **响应式设计**：支持各种屏幕尺寸

### 后端API

- **系统监控路由**：`/system/*` 端点提供监控数据
- **测试执行引擎**：后台任务处理测试执行
- **性能指标收集**：Prometheus集成的指标收集
- **健康检查机制**：多层次的系统健康检查

### 数据流

```
前端界面 ←→ React Query ←→ REST API ←→ 监控模块 ←→ 系统资源
    ↓              ↓           ↓          ↓
用户交互 ←→ 状态管理 ←→ HTTP请求 ←→ 数据处理 ←→ 指标收集
```

## 更新日志

### v2.0.0 (当前版本)

- ✨ 新增综合测试监控面板
- 🚀 实时系统性能监控
- 🧪 集成自动化测试功能
- 📊 可视化数据展示
- 📋 系统报告导出功能
- 🔄 自动数据刷新机制
- 🎨 响应式用户界面设计

## 支持与反馈

如果您在使用过程中遇到问题或有改进建议，请：

1. 查看系统日志获取详细错误信息
2. 检查本文档的故障排除部分
3. 联系技术支持团队

---

**NAXS 智能投研系统** - 让投资决策更智能，让系统监控更简单！